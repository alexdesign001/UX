function EventAdapter(a){this.ADD_EVENT_LISTENER_EVENT=this.initQualifiedEventName(a,EventAdapter.ADD_EVENT_LISTENER_EVENT_NAME);this.REMOVE_EVENT_LISTENER_EVENT=this.initQualifiedEventName(a,EventAdapter.REMOVE_EVENT_LISTENER_EVENT_NAME);this.CPP_CS_EVENT_EVENT=this.initQualifiedEventName(a,EventAdapter.CPP_CS_EVENT_EVENT_NAME);this.PING_REQUEST_EVENT=this.initQualifiedEventName(a,EventAdapter.PING_REQUEST_EVENT_NAME);this.PING_RESPONSE_EVENT=this.initQualifiedEventName(a,EventAdapter.PING_RESPONSE_EVENT_NAME);
this.LIST_EVENTS_REQUEST_EVENT=this.initQualifiedEventName(a,EventAdapter.LIST_EVENTS_REQUEST_EVENT_NAME);this.LIST_EVENTS_RESPONSE_EVENT=this.initQualifiedEventName(a,EventAdapter.LIST_EVENTS_RESPONSE_EVENT_NAME);this.dispatcherDelegate=this;this.userPingResponseHandler;this.pingStarted;this.userListEventsResponseHandler;this.csInterface=new CSInterface;this.eventListening={};this.CPP_CS_EVENT_EVENT_added=!1}EventAdapter.ADD_EVENT_LISTENER_EVENT_NAME="AddEventListener";
EventAdapter.REMOVE_EVENT_LISTENER_EVENT_NAME="RemoveEventListener";EventAdapter.CPP_CS_EVENT_EVENT_NAME="CppEvent";EventAdapter.PING_REQUEST_EVENT_NAME="PingRequestEvent";EventAdapter.PING_RESPONSE_EVENT_NAME="PingResponseEvent";EventAdapter.LIST_EVENTS_REQUEST_EVENT_NAME="ListEventsRequestEvent";EventAdapter.LIST_EVENTS_RESPONSE_EVENT_NAME="ListEventsResponseEvent";EventAdapter.prototype.initQualifiedEventName=function(a,b){return a+"."+b};
EventAdapter.prototype.pingPlugIn=function(a,b){function c(a){d.csInterface.removeEventListener(d.PING_RESPONSE_EVENT,c);d.userPingResponseHandler(new PingEvent(a.type==d.PING_RESPONSE_EVENT?PingEvent.PING_SUCCEEDED:PingEvent.PING_TIMED_OUT));d.pingStarted=!1}isNaN(b)&&(b=5E3);var d=this;this.pingStarted?alert("[EventAdapter]: Failed to ping plug-in - another ping response is pending"):(this.userPingResponseHandler=a,this.csInterface.addEventListener(this.PING_RESPONSE_EVENT,c),setTimeout(function(){d.dispatchToEventAdapter(d.PING_REQUEST_EVENT)},
b),this.pingStarted=!0)};EventAdapter.prototype.dispatchToEventAdapter=function(a,b){var c=new CSEvent(a,"GLOBAL",this.csInterface.getApplicationID());c.data=b;this.csInterface.dispatchEvent(c)};EventAdapter.prototype.hasEventListener=function(a){return this.eventListening[a]};
EventAdapter.prototype.addEventListener=function(a,b,c,d,e){d=(c=this.hasEventListener(a))?this.eventListening[a]:{};d[b]=b;this.eventListening[a]=d;var f=this;this.CPP_CS_EVENT_EVENT_added||(this.CPP_CS_EVENT_EVENT_added=!0,this.csInterface.addEventListener(this.CPP_CS_EVENT_EVENT,function(a){f.eventForwarder(a)}));c||this.dispatchToEventAdapter(this.ADD_EVENT_LISTENER_EVENT,a)};
EventAdapter.prototype.eventForwarder=function(a){a=this.createAppEvent(a);var b=this.eventListening[a.type];if(b)for(var c in b)b[c].call(this,a)};EventAdapter.prototype.createAppEvent=function(a){throw Error("EventAdapter.createAppEvent(..) must be overridden by subclasses");};
EventAdapter.prototype.removeEventListener=function(a,b,c){if(c=this.hasEventListener(a)){var d=this.eventListening[a],e=0;if(d&&(d&&d[b]&&delete d[b],d))for(var f in d)d.hasOwnProperty(f)&&e++;0==e&&delete this.eventListening[a];c&&!this.hasEventListener(a)&&this.dispatchToEventAdapter(this.REMOVE_EVENT_LISTENER_EVENT,a)}};
EventAdapter.prototype.listEvents=function(a){function b(a){c.csInterface.removeEventListener(c.LIST_EVENTS_RESPONSE_EVENT,b);var e=[];a=(new DOMParser).parseFromString(a.data.replace("<![CDATA[","").replace("]]\x3e",""),"text/xml").firstChild.childNodes;for(var f=0;f<a.length;f++)e.push(a[f].getAttribute("id"));e=new ListEventsEvent(ListEventsEvent.LIST,e);c.userListEventsResponseHandler(e)}this.userListEventsResponseHandler=a;this.csInterface.addEventListener(this.LIST_EVENTS_RESPONSE_EVENT,b);
this.dispatchToEventAdapter(this.LIST_EVENTS_REQUEST_EVENT);var c=this};function PingEvent(a){this.type=a}PingEvent.PING_SUCCEEDED="pingSucceeded";PingEvent.PING_TIMED_OUT="pingTimedOut";function ListEventsEvent(a,b){this.type=a;this._list=b}ListEventsEvent.LIST="listEvents";ListEventsEvent.prototype.list=function(){return this._list};function PSEvent(a){this.type=a}PSEvent._3DTRANSFORM="1415861280";PSEvent.AVERAGE="1098281575";PSEvent.APPLY_STYLE="1095988345";PSEvent.ASSERT="1098084980";
PSEvent.ACCENTED_EDGES="1097032517";PSEvent.ADD="1097098272";PSEvent.ADD_NOISE="1097092723";PSEvent.ADD_TO="1097098324";PSEvent.ALIGN="1097623406";PSEvent.ALL="1097624608";PSEvent.ANGLED_STROKES="1097754451";PSEvent.APPLY_IMAGE="1097887817";PSEvent.BAS_RELIEF="1114853996";PSEvent.BATCH="1114923880";PSEvent.BATCH_FROM_DROPLET="1114923846";PSEvent.BLUR="1114403360";PSEvent.BLUR_MORE="1114403405";PSEvent.BORDER="1114793074";PSEvent.BRIGHTNESS="1114793795";PSEvent.CANVAS_SIZE="1131312723";
PSEvent.CHALK_CHARCOAL="1130916931";PSEvent.CHANNEL_MIXER="1130917453";PSEvent.CHARCOAL="1130918499";PSEvent.CHROME="1130918509";PSEvent.CLEAR="1131177330";PSEvent.CLOSE="1131180832";PSEvent.CLOUDS="1131177075";PSEvent.COLOR_BALANCE="1131180610";PSEvent.COLOR_HALFTONE="1131180616";PSEvent.COLOR_RANGE="1131180626";PSEvent.COLORED_PENCIL="1131180624";PSEvent.CONTE_CRAYON="1131312195";PSEvent.CONTRACT="1131312227";PSEvent.CONVERT_MODE="1131312717";PSEvent.COPY="1668247673";PSEvent.COPY_EFFECTS="1131431512";
PSEvent.COPY_MERGED="1131444557";PSEvent.COPY_TO_LAYER="1131435084";PSEvent.CRAQUELURE="1131573612";PSEvent.CREATE_DROPLET="1131574340";PSEvent.CROP="1131573104";PSEvent.CROSSHATCH="1131574120";PSEvent.CRYSTALLIZE="1131574132";PSEvent.CURVES="1131574899";PSEvent.CUSTOM="1131639917";PSEvent.CUT="1668641824";PSEvent.CUT_TO_LAYER="1131697228";PSEvent.CUTOUT="1131683872";PSEvent.DARK_STROKES="1148349267";PSEvent.DE_INTERLACE="1148089458";PSEvent.DEFINE_PATTERN="1147563600";PSEvent.DEFRINGE="1147564647";
PSEvent.DELETE="1147958304";PSEvent.DESATURATE="1148417140";PSEvent.DESELECT="1148415075";PSEvent.DESPECKLE="1148416099";PSEvent.DIFFERENCE_CLOUDS="1147564611";PSEvent.DIFFUSE="1147564832";PSEvent.DIFFUSE_GLOW="1147564871";PSEvent.DISABLE_LAYER_FX="1684825720";PSEvent.DISPLACE="1148416108";PSEvent.DISTRIBUTE="1148417138";PSEvent.DRAW="1148346743";PSEvent.DRY_BRUSH="1148352834";PSEvent.DUPLICATE="1148218467";PSEvent.DUST_AND_SCRATCHES="1148417107";PSEvent.EMBOSS="1164796531";PSEvent.EQUALIZE="1165061242";
PSEvent.EXCHANGE="1165517672";PSEvent.EXPAND="1165521006";PSEvent.EXPORT="1165521010";PSEvent.EXTRUDE="1165522034";PSEvent.FACET="1180922912";PSEvent.FADE="1180787813";PSEvent.FEATHER="1182034034";PSEvent.FIBERS="1180856947";PSEvent.FILL="1181491232";PSEvent.FILM_GRAIN="1181510983";PSEvent.FILTER="1181512818";PSEvent.FIND_EDGES="1181639749";PSEvent.FLATTEN_IMAGE="1181512777";PSEvent.FLIP="1181510000";PSEvent.FRAGMENT="1181902701";PSEvent.FRESCO="1181905763";PSEvent.GAUSSIAN_BLUR="1198747202";
PSEvent.GET="1734702180";PSEvent.GLASS="1198289696";PSEvent.GLOWING_EDGES="1198290757";PSEvent.GRADIENT="1198679150";PSEvent.GRADIENT_MAP="1198673264";PSEvent.GRAIN="1198681632";PSEvent.GRAPHIC_PEN="1198678352";PSEvent.GROUP="1198682188";PSEvent.GROW="1198681975";PSEvent.HALFTONE_SCREEN="1215063635";PSEvent.HIDE="1214521376";PSEvent.HIGH_PASS="1214736464";PSEvent.HSBHSL="1215521360";PSEvent.HUE_SATURATION="1213428850";PSEvent.IMAGE_SIZE="1231906643";PSEvent.IMPORT="1231908978";
PSEvent.INK_OUTLINES="1231973199";PSEvent.INTERSECT="1231975538";PSEvent.INTERSECT_WITH="1231975511";PSEvent.INVERSE="1231976051";PSEvent.INVERT="1231976050";PSEvent.LENS_FLARE="1282306886";PSEvent.LEVELS="1282829427";PSEvent.LIGHTING_EFFECTS="1281845317";PSEvent.LINK="1282304800";PSEvent.MAKE="1298866208";PSEvent.MAXIMUM="1299737888";PSEvent.MEDIAN="1298427424";PSEvent.MERGE_LAYERS="1299343154";PSEvent.MERGE_LAYERS_OLD="1299343180";PSEvent.MERGE_SPOT_CHANNEL="1297313908";PSEvent.MERGE_VISIBLE="1299343190";
PSEvent.MEZZOTINT="1299870830";PSEvent.MINIMUM="1299082528";PSEvent.MOSAIC="1299407648";PSEvent.MOSAIC_PLUGIN="1299407700";PSEvent.MOTION_BLUR="1299476034";PSEvent.MOVE="1836021349";PSEvent.NTSCCOLORS="1314149187";PSEvent.NEON_GLOW="1313303671";PSEvent.NEXT="1316516896";PSEvent.NOTE_PAPER="1316245618";PSEvent.NOTIFY="1316251257";PSEvent.OCEAN_RIPPLE="1331916370";PSEvent.OFFSET="1332114292";PSEvent.OPEN="1332768288";PSEvent.PAINT="1349415968";PSEvent.PAINT_DAUBS="1349416004";
PSEvent.PALETTE_KNIFE="1349284939";PSEvent.PASTE="1885434740";PSEvent.PASTE_EFFECTS="1348552280";PSEvent.PASTE_INTO="1349743689";PSEvent.PASTE_OUTSIDE="1349743695";PSEvent.PATCHWORK="1349804904";PSEvent.PHOTOCOPY="1349022819";PSEvent.PINCH="1349411688";PSEvent.PLACE="1349280544";PSEvent.PLASTER="1349284724";PSEvent.PLASTIC_WRAP="1349284695";PSEvent.PLAY="1349286176";PSEvent.POINTILLIZE="1349416044";PSEvent.POLAR="1349284384";PSEvent.POSTER_EDGES="1349743685";PSEvent.POSTERIZE="1349743730";
PSEvent.PREVIOUS="1349678707";PSEvent.PRINT="1349676660";PSEvent.PROFILE_TO_PROFILE="1349674580";PSEvent.PURGE="1349674853";PSEvent.QUIT="1903520116";PSEvent.RADIAL_BLUR="1382313026";PSEvent.RASTERIZE="1383298162";PSEvent.RASTERIZE_TYPE_SHEET="1383298132";PSEvent.REMOVE_BLACK_MATTE="1382905410";PSEvent.REMOVE_LAYER_MASK="1382905420";PSEvent.REMOVE_WHITE_MATTE="1382905431";PSEvent.RENAME="1382968608";PSEvent.REPLACE_COLOR="1383099459";PSEvent.RESET="1383294324";PSEvent.RETICULATION="1383359340";
PSEvent.REVERT="1383494260";PSEvent.RIPPLE="1383099493";PSEvent.ROTATE="1383363685";PSEvent.ROUGH_PASTELS="1382508624";PSEvent.SAVE="1935767141";PSEvent.SELECT="1936483188";PSEvent.SELECTIVE_COLOR="1399612227";PSEvent.SET="1936028772";PSEvent.SHARPEN_EDGES="1399353925";PSEvent.SHARPEN="1399353968";PSEvent.SHARPEN_MORE="1399353933";PSEvent.SHEAR="1399353888";PSEvent.SHOW="1399355168";PSEvent.SIMILAR="1399680114";PSEvent.SMART_BLUR="1399681602";PSEvent.SMOOTH="1399682152";PSEvent.SMUDGE_STICK="1399678035";
PSEvent.SOLARIZE="1399616122";PSEvent.SPATTER="1399878688";PSEvent.SPHERIZE="1399875698";PSEvent.SPLIT_CHANNELS="1399876675";PSEvent.SPONGE="1399877223";PSEvent.SPRAYED_STROKES="1399878227";PSEvent.STAINED_GLASS="1400139335";PSEvent.STAMP="1400139120";PSEvent.STOP="1400139632";PSEvent.STROKE="1400140395";PSEvent.SUBTRACT="1398961266";PSEvent.SUBTRACT_FROM="1398961222";PSEvent.SUMIE="1399679333";PSEvent.TAKE_MERGED_SNAPSHOT="1416318322";PSEvent.TAKE_SNAPSHOT="1416319854";PSEvent.TEXTURE_FILL="1417180230";
PSEvent.TEXTURIZER="1417180282";PSEvent.THRESHOLD="1416131187";PSEvent.TILES="1416393504";PSEvent.TORN_EDGES="1416785477";PSEvent.TRACE_CONTOUR="1416782659";PSEvent.TRANSFORM="1416785510";PSEvent.TRAP="1416782192";PSEvent.TWIRL="1417114220";PSEvent.UNDERPAINTING="1433298034";PSEvent.UNDO="1970168943";PSEvent.UNGROUP="1433298802";PSEvent.UNLINK="1433300075";PSEvent.UNSHARP_MASK="1433301837";PSEvent.VARIATIONS="1450341486";PSEvent.WAIT="1466001780";PSEvent.WATER_PAPER="1467249232";
PSEvent.WATERCOLOR="1467249251";PSEvent.WAVE="1466005093";PSEvent.WIND="1466852384";PSEvent.ZIG_ZAG="1516722791";PSEvent.BACK_LIGHT="1113678668";PSEvent.FILL_FLASH="1181314117";PSEvent.COLOR_CAST="1131375685";PSEvent.OPEN_UNTITLED="1332768341";
PSEvent.events={1095988345:"APPLY_STYLE",1097032517:"ACCENTED_EDGES",1097092723:"ADD_NOISE",1097098272:"ADD",1097098324:"ADD_TO",1097623406:"ALIGN",1097624608:"ALL",1097754451:"ANGLED_STROKES",1097887817:"APPLY_IMAGE",1098084980:"ASSERT",1098281575:"AVERAGE",1113678668:"BACK_LIGHT",1114403360:"BLUR",1114403405:"BLUR_MORE",1114793074:"BORDER",1114793795:"BRIGHTNESS",1114853996:"BAS_RELIEF",1114923846:"BATCH_FROM_DROPLET",1114923880:"BATCH",1130916931:"CHALK_CHARCOAL",1130917453:"CHANNEL_MIXER",1130918499:"CHARCOAL",
1130918509:"CHROME",1131177075:"CLOUDS",1131177330:"CLEAR",1131180610:"COLOR_BALANCE",1131180616:"COLOR_HALFTONE",1131180624:"COLORED_PENCIL",1131180626:"COLOR_RANGE",1131180832:"CLOSE",1131312195:"CONTE_CRAYON",1131312227:"CONTRACT",1131312717:"CONVERT_MODE",1131312723:"CANVAS_SIZE",1131375685:"COLOR_CAST",1131431512:"COPY_EFFECTS",1131435084:"COPY_TO_LAYER",1131444557:"COPY_MERGED",1131573104:"CROP",1131573612:"CRAQUELURE",1131574120:"CROSSHATCH",1131574132:"CRYSTALLIZE",1131574340:"CREATE_DROPLET",
1131574899:"CURVES",1131639917:"CUSTOM",1131683872:"CUTOUT",1131697228:"CUT_TO_LAYER",1147563600:"DEFINE_PATTERN",1147564611:"DIFFERENCE_CLOUDS",1147564647:"DEFRINGE",1147564832:"DIFFUSE",1147564871:"DIFFUSE_GLOW",1147958304:"DELETE",1148089458:"DE_INTERLACE",1148218467:"DUPLICATE",1148346743:"DRAW",1148349267:"DARK_STROKES",1148352834:"DRY_BRUSH",1148415075:"DESELECT",1148416099:"DESPECKLE",1148416108:"DISPLACE",1148417107:"DUST_AND_SCRATCHES",1148417138:"DISTRIBUTE",1148417140:"DESATURATE",1164796531:"EMBOSS",
1165061242:"EQUALIZE",1165517672:"EXCHANGE",1165521006:"EXPAND",1165521010:"EXPORT",1165522034:"EXTRUDE",1180787813:"FADE",1180856947:"FIBERS",1180922912:"FACET",1181314117:"FILL_FLASH",1181491232:"FILL",118151E4:"FLIP",1181510983:"FILM_GRAIN",1181512777:"FLATTEN_IMAGE",1181512818:"FILTER",1181639749:"FIND_EDGES",1181902701:"FRAGMENT",1181905763:"FRESCO",1182034034:"FEATHER",1198289696:"GLASS",1198290757:"GLOWING_EDGES",1198673264:"GRADIENT_MAP",1198678352:"GRAPHIC_PEN",1198679150:"GRADIENT",1198681632:"GRAIN",
1198681975:"GROW",1198682188:"GROUP",1198747202:"GAUSSIAN_BLUR",1213428850:"HUE_SATURATION",1214521376:"HIDE",1214736464:"HIGH_PASS",1215063635:"HALFTONE_SCREEN",1215521360:"HSBHSL",1231906643:"IMAGE_SIZE",1231908978:"IMPORT",1231973199:"INK_OUTLINES",1231975511:"INTERSECT_WITH",1231975538:"INTERSECT",1231976050:"INVERT",1231976051:"INVERSE",1281845317:"LIGHTING_EFFECTS",1282304800:"LINK",1282306886:"LENS_FLARE",1282829427:"LEVELS",1297313908:"MERGE_SPOT_CHANNEL",1298427424:"MEDIAN",1298866208:"MAKE",
1299082528:"MINIMUM",1299343154:"MERGE_LAYERS",1299343180:"MERGE_LAYERS_OLD",1299343190:"MERGE_VISIBLE",1299407648:"MOSAIC",1299407700:"MOSAIC_PLUGIN",1299476034:"MOTION_BLUR",1299737888:"MAXIMUM",1299870830:"MEZZOTINT",1313303671:"NEON_GLOW",1314149187:"NTSCCOLORS",1316245618:"NOTE_PAPER",1316251257:"NOTIFY",1316516896:"NEXT",1331916370:"OCEAN_RIPPLE",1332114292:"OFFSET",1332768288:"OPEN",1332768341:"OPEN_UNTITLED",1348552280:"PASTE_EFFECTS",1349022819:"PHOTOCOPY",1349280544:"PLACE",1349284384:"POLAR",
1349284695:"PLASTIC_WRAP",1349284724:"PLASTER",1349284939:"PALETTE_KNIFE",1349286176:"PLAY",1349411688:"PINCH",1349415968:"PAINT",1349416004:"PAINT_DAUBS",1349416044:"POINTILLIZE",1349674580:"PROFILE_TO_PROFILE",1349674853:"PURGE",1349676660:"PRINT",1349678707:"PREVIOUS",1349743685:"POSTER_EDGES",1349743689:"PASTE_INTO",1349743695:"PASTE_OUTSIDE",1349743730:"POSTERIZE",1349804904:"PATCHWORK",1382313026:"RADIAL_BLUR",1382508624:"ROUGH_PASTELS",1382905410:"REMOVE_BLACK_MATTE",1382905420:"REMOVE_LAYER_MASK",
1382905431:"REMOVE_WHITE_MATTE",1382968608:"RENAME",1383099459:"REPLACE_COLOR",1383099493:"RIPPLE",1383294324:"RESET",1383298132:"RASTERIZE_TYPE_SHEET",1383298162:"RASTERIZE",1383359340:"RETICULATION",1383363685:"ROTATE",1383494260:"REVERT",1398961222:"SUBTRACT_FROM",1398961266:"SUBTRACT",1399353888:"SHEAR",1399353925:"SHARPEN_EDGES",1399353933:"SHARPEN_MORE",1399353968:"SHARPEN",1399355168:"SHOW",1399612227:"SELECTIVE_COLOR",1399616122:"SOLARIZE",1399678035:"SMUDGE_STICK",1399679333:"SUMIE",1399680114:"SIMILAR",
1399681602:"SMART_BLUR",1399682152:"SMOOTH",1399875698:"SPHERIZE",1399876675:"SPLIT_CHANNELS",1399877223:"SPONGE",1399878227:"SPRAYED_STROKES",1399878688:"SPATTER",1400139120:"STAMP",1400139335:"STAINED_GLASS",1400139632:"STOP",1400140395:"STROKE",1415861280:"_3DTRANSFORM",1416131187:"THRESHOLD",1416318322:"TAKE_MERGED_SNAPSHOT",1416319854:"TAKE_SNAPSHOT",1416393504:"TILES",1416782192:"TRAP",1416782659:"TRACE_CONTOUR",1416785477:"TORN_EDGES",1416785510:"TRANSFORM",1417114220:"TWIRL",1417180230:"TEXTURE_FILL",
1417180282:"TEXTURIZER",1433298034:"UNDERPAINTING",1433298802:"UNGROUP",1433300075:"UNLINK",1433301837:"UNSHARP_MASK",1450341486:"VARIATIONS",1466001780:"WAIT",1466005093:"WAVE",1466852384:"WIND",1467249232:"WATER_PAPER",1467249251:"WATERCOLOR",1516722791:"ZIG_ZAG",1668247673:"COPY",1668641824:"CUT",1684825720:"DISABLE_LAYER_FX",1734702180:"GET",1836021349:"MOVE",1885434740:"PASTE",1903520116:"QUIT",1935767141:"SAVE",1936028772:"SET",1936483188:"SELECT",1970168943:"UNDO"};
function PSEventAdapter(){EventAdapter.call(this,PSEventAdapter.NAMESPACE)}PSEventAdapter.getInstance=function(){null==PSEventAdapter.instance&&(PSEventAdapter.instance=new PSEventAdapter);return PSEventAdapter.instance};PSEventAdapter.NAMESPACE="com.adobe.photoshop.events";extendObj(PSEventAdapter,EventAdapter);PSEventAdapter.prototype.createAppEvent=function(a){a=(new DOMParser).parseFromString(a.data.replace("<![CDATA[","").replace("]]\x3e",""),"text/xml").firstChild.getAttribute("id");return new PSEvent(a)};
function extendObj(a,b){var c=new Function;c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a};
